# HR Bot - Telegram –±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞–π–º–∞

Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞ —Ä–µ–∑—é–º–µ –∏ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤—å—é —Å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏.

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ‚úÖ –ó–∞–ø—Ä–æ—Å –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏ –≤ –Ω–∞—á–∞–ª–µ –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ –°–±–æ—Ä –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, –æ—Ç—á–µ—Å—Ç–≤–æ, —Ç–µ–ª–µ—Ñ–æ–Ω, Telegram username, –≥–æ—Ä–æ–¥)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Telegram username –∏–ª–∏ –∑–∞–ø—Ä–æ—Å, –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—é–º–µ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö PDF –∏ DOCX (–¥–æ 5 –ú–ë)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ —Ä–µ–∑—é–º–µ
- ‚úÖ –ò–º–∏—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞ —Ä–µ–∑—é–º–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (–ø—Ä–∏–Ω—è—Ç/–æ—Ç–∫–ª–æ–Ω–µ–Ω)
- ‚úÖ –ü–µ—Ä–≤–∏—á–Ω–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ—Ç–≤–µ—Ç
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
- ‚úÖ –ò–º–∏—Ç–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–Ω—Ç–µ—Ä–≤—å—é
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–∞—Ö –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (/questions)
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é –ø–æ–∑–∂–µ —á–µ—Ä–µ–∑ /resume

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í —Ñ–∞–π–ª–µ `config.py`:

```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
BOT_TOKEN = "–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather"
ADMIN_ID = "–≤–∞—à_telegram_id"

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Ç–µ—Ä–≤—å—é
INTERVIEW_TIME_LIMIT = 60  # —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –æ—Ç–≤–µ—Ç
INTERVIEW_QUESTIONS_COUNT = 5  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
MAX_RESUME_SIZE_MB = 5  # –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ä–µ–∑—é–º–µ –≤ –ú–ë

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–µ–∑—é–º–µ (–≤—Ä–µ–º–µ–Ω–Ω–æ)
RESUMES_DIR = 'resumes'
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.10+
- Linux/Ubuntu (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ pip
sudo apt install python3.10 python3-pip python3-venv -y

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫

```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
source venv/bin/activate

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
echo "BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω" > .env
echo "ADMIN_ID=–≤–∞—à_id" >> .env

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python main.py
```

### –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/hrbot.service`:

```ini
[Unit]
Description=HR Telegram Bot
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/path/to/HR_Bot
Environment="PATH=/path/to/HR_Bot/venv/bin"
ExecStart=/path/to/HR_Bot/venv/bin/python main.py
Restart=always

[Install]
WantedBy=multi-user.target
```

–ê–∫—Ç–∏–≤–∞—Ü–∏—è:
```bash
sudo systemctl enable hrbot
sudo systemctl start hrbot
```

## üîå API Endpoints –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±—ç–∫–µ–Ω–¥–æ–º

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º–∏

#### `POST /api/candidates`
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞

**Request Body:**
```json
{
  "telegram_id": 123456789,
  "vacancy_name": "Python Developer",
  "first_name": "–ò–≤–∞–Ω",
  "last_name": "–ò–≤–∞–Ω–æ–≤", 
  "middle_name": "–ò–≤–∞–Ω–æ–≤–∏—á",
  "phone": "+79123456789",
  "telegram_username": "@ivan_ivanov",
  "city": "–ú–æ—Å–∫–≤–∞",
  "resume_path": "resumes/123456789_resume.pdf"
}
```

**Response:**
```json
{
  "success": true,
  "candidate_id": "uuid",
  "message": "–ö–∞–Ω–¥–∏–¥–∞—Ç —Å–æ–∑–¥–∞–Ω"
}
```

#### `GET /api/candidates/{telegram_id}/status`
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞

**Response:**
```json
{
  "status": "interview_pending",
  "status_text": "–û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é",
  "description": "–ì–æ—Ç–æ–≤–∏–º—Å—è –∫ –≤–∞—à–µ–º—É –∏–Ω—Ç–µ—Ä–≤—å—é",
  "created_at": "2024-01-01T12:00:00Z",
  "updated_at": "2024-01-01T12:30:00Z"
}
```

### 2. –°–∫—Ä–∏–Ω–∏–Ω–≥ —Ä–µ–∑—é–º–µ

#### `POST /api/screening/process`
–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–Ω–∏–Ω–≥ —Ä–µ–∑—é–º–µ

**Request Body:**
```json
{
  "candidate_id": "uuid",
  "resume_path": "resumes/123456789_resume.pdf",
  "vacancy_name": "Python Developer"
}
```

#### `GET /api/screening/{candidate_id}/result`
–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞

**Response:**
```json
{
  "passed": true,
  "score": 85,
  "feedback": "–í–∞—à–µ —Ä–µ–∑—é–º–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º",
  "processed_at": "2024-01-01T12:15:00Z"
}
```

### 3. –ò–Ω—Ç–µ—Ä–≤—å—é

#### `GET /api/vacancies/{vacancy_name}/questions`
–ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é

**Response:**
```json
{
  "questions": [
    {
      "id": 1,
      "text": "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–µ–º –æ–ø—ã—Ç–µ —Ä–∞–±–æ—Ç—ã",
      "time_limit": 60,
      "order": 1
    },
    {
      "id": 2, 
      "text": "–ö–∞–∫–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ?",
      "time_limit": 60,
      "order": 2
    }
  ]
}
```

#### `POST /api/interview/answers`
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å

**Request Body:**
```json
{
  "candidate_id": "uuid",
  "question_id": 1,
  "answer": "–£ –º–µ–Ω—è 5 –ª–µ—Ç –æ–ø—ã—Ç–∞ –≤ Python —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ",
  "timestamp": "2024-01-01T12:20:00Z",
  "time_taken": 45
}
```

#### `POST /api/interview/{candidate_id}/complete`
–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é

**Request Body:**
```json
{
  "candidate_id": "uuid",
  "answers": [
    {
      "question_id": 1,
      "answer": "–û—Ç–≤–µ—Ç 1",
      "time_taken": 45
    }
  ],
  "completed_at": "2024-01-01T12:30:00Z"
}
```

#### `GET /api/interview/{candidate_id}/result`
–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω—Ç–µ—Ä–≤—å—é

**Response:**
```json
{
  "passed": true,
  "score": 78,
  "feedback": "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø",
  "analyzed_at": "2024-01-01T12:35:00Z"
}
```

### 4. FAQ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

#### `GET /api/info/timing`
–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ä–æ–∫–∞—Ö

**Response:**
```json
{
  "resume_review_days": "1-2",
  "interview_analysis_days": "2-3", 
  "hr_review_days": "3-5"
}
```

#### `GET /api/info/contact`
–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

**Response:**
```json
{
  "email": "hr@company.com",
  "phone": "+7 (495) 123-45-67",
  "working_hours": "–ü–Ω-–ü—Ç, 9:00-18:00 (–ú–°–ö)"
}
```

## üîÑ –¢—Ä–∏–≥–≥–µ—Ä—ã –æ—Ç –±—ç–∫–µ–Ω–¥–∞ –∫ –±–æ—Ç—É

### Webhook endpoint –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### `POST /api/bot/notify`
–ü–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –±—ç–∫–µ–Ω–¥–∞

**Request Body:**
```json
{
  "telegram_id": 123456789,
  "event_type": "screening_complete",
  "data": {
    "passed": true,
    "score": 85,
    "feedback": "–í–∞—à–µ —Ä–µ–∑—é–º–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º"
  }
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ event_type:**
- `screening_complete` - —Å–∫—Ä–∏–Ω–∏–Ω–≥ –∑–∞–≤–µ—Ä—à–µ–Ω
- `interview_result` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω—Ç–µ—Ä–≤—å—é –≥–æ—Ç–æ–≤
- `status_changed` - —Å—Ç–∞—Ç—É—Å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∏–∑–º–µ–Ω–∏–ª—Å—è
- `interview_reminder` - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–≤—å—é

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –≤ –±–æ—Ç–µ

–í `main.py` –∑–∞–º–µ–Ω–∏—Ç–µ polling –Ω–∞ webhook:

```python
# –í–º–µ—Å—Ç–æ:
# await dp.start_polling(bot)

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
from aiohttp import web

async def handle_webhook(request):
    update = await request.json()
    await dp.feed_update(bot, Update(**update))
    return web.Response()

app = web.Application()
app.router.add_post('/webhook', handle_webhook)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ webhook
await bot.set_webhook(f'{WEBHOOK_URL}/webhook')
web.run_app(app, host='0.0.0.0', port=8080)
```

## üìù –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/resume` - –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é
- `/questions` - –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (—Å—Ç–∞—Ç—É—Å, —Å—Ä–æ–∫–∏, –∫–æ–Ω—Ç–∞–∫—Ç—ã)
- `/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
HR_Bot/
‚îú‚îÄ‚îÄ main.py              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ handlers.py          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ states.py            # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îú‚îÄ‚îÄ keyboards.py         # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ mock_data.py         # –ó–∞–≥–ª—É—à–∫–∏ (–∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ API)
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ resumes/            # –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
```

### –ó–∞–º–µ–Ω–∞ –∑–∞–≥–ª—É—à–µ–∫ –Ω–∞ API

–í —Ñ–∞–π–ª–µ `mock_data.py` –∑–∞–º–µ–Ω–∏—Ç–µ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞ `MockDatabase` –Ω–∞ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ –≤–∞—à–∏–º API endpoints.

–ü—Ä–∏–º–µ—Ä –∑–∞–º–µ–Ω—ã:
```python
import aiohttp

async def save_candidate(self, user_id: int, data: dict) -> bool:
    async with aiohttp.ClientSession() as session:
        async with session.post(
            f'{BACKEND_URL}/api/candidates',
            json={
                'telegram_id': user_id,
                'vacancy_name': data['vacancy_name'],
                'first_name': data['first_name'],
                'last_name': data['last_name'],
                'middle_name': data.get('middle_name'),
                'phone': data['phone'],
                'telegram_username': data.get('telegram_username'),
                'city': data['city'],
                'resume_path': data['resume_path']
            },
            headers={'Authorization': f'Bearer {API_TOKEN}'}
        ) as response:
            return response.status == 201
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT